import { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '@/components': path.resolve(__dirname, './src/components'),\n      '@/services': path.resolve(__dirname, './src/services'),\n      '@/types': path.resolve(__dirname, './src/types'),\n      '@/hooks': path.resolve(__dirname, './src/hooks'),\n      '@/utils': path.resolve(__dirname, './src/utils'),\n      '@/styles': path.resolve(__dirname, './src/styles')\n    }\n  },\n  server: {\n    port: 3001, // Different from internal dispatch console (3000)\n    host: true, // Allow external connections\n    cors: true,\n    proxy: {\n      // Proxy API calls to backend server\n      '/api': {\n        target: 'http://localhost:5000',\n        changeOrigin: true,\n        secure: false,\n        timeout: 30000,\n        configure: (proxy) => {\n          proxy.on('proxyReq', (proxyReq, req) => {\n            console.log(`[CLIENT-PORTAL] Proxying ${req.method} ${req.url} to backend`);\n          });\n          proxy.on('error', (err, req) => {\n            console.error(`[CLIENT-PORTAL] Proxy error for ${req.url}:`, err.message);\n          });\n        }\n      }\n    }\n  },\n  build: {\n    outDir: 'dist',\n    sourcemap: true,\n    minify: 'esbuild',\n    target: 'es2022',\n    rollupOptions: {\n      output: {\n        manualChunks: {\n          // Vendor chunk for large dependencies\n          vendor: ['react', 'react-dom', 'react-router-dom'],\n          // UI chunk for chart and component libraries\n          ui: ['recharts', 'lucide-react', 'react-hook-form'],\n          // Utils chunk for smaller utilities\n          utils: ['axios', 'date-fns', 'clsx', 'js-cookie']\n        }\n      }\n    },\n    // Build optimization\n    chunkSizeWarningLimit: 1000,\n    assetsInlineLimit: 4096\n  },\n  define: {\n    __CLIENT_PORTAL__: true,\n    __DEV__: process.env.NODE_ENV === 'development',\n    __PROD__: process.env.NODE_ENV === 'production'\n  },\n  css: {\n    devSourcemap: true,\n    preprocessorOptions: {\n      scss: {\n        additionalData: `@import \"@/styles/variables.scss\";`\n      }\n    }\n  },\n  // Environment variables configuration\n  envPrefix: 'VITE_',\n  \n  // Development optimization\n  optimizeDeps: {\n    include: [\n      'react',\n      'react-dom',\n      'react-router-dom',\n      'axios',\n      'date-fns',\n      'recharts',\n      'lucide-react',\n      'react-hook-form'\n    ],\n    exclude: ['fsevents']\n  },\n  \n  // Security headers for development\n  preview: {\n    port: 3002,\n    host: true,\n    headers: {\n      'X-Frame-Options': 'DENY',\n      'X-Content-Type-Options': 'nosniff',\n      'Referrer-Policy': 'strict-origin-when-cross-origin'\n    }\n  }\n});\n"